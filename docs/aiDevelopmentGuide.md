# AI开发指导文档

## 一、开发理念与流程

### 1.1 核心原则
- **模块化开发**：每个模块独立开发、测试、部署
- **前后端并行**：前端组件与后端服务同步开发
- **开发即测试**：编写代码的同时编写测试用例
- **持续审查**：每个功能点完成后立即进行代码审查
- **生产环境验证**：每个模块必须在生产环境下测试通过
- **简化设计**：避免过度设计，保持代码简洁实用

### 1.2 质量标准
- 单元测试覆盖率 ≥ 90%
- 集成测试覆盖率 ≥ 85%
- 端到端测试覆盖率 ≥ 80%
- 代码审查通过率 100%
- 生产环境测试通过率 100%

### 1.3 开发流程
```
需求分析 → 设计评审 → 环境准备 →
前后端并行开发(开发即测试) →
功能点代码审查 → 模块集成测试 →
生产环境验证 → 模块验收 → 下一模块
```

### 1.4 测试与审查节点
- **开发中测试**：每写一个函数/组件立即编写对应测试
- **功能点审查**：每完成一个功能点立即进行代码审查
- **日常集成测试**：每日结束前运行完整测试套件
- **模块完成审查**：模块开发完成后进行全面审查
- **生产环境验证**：在真实生产环境中验证模块功能

## 二、开发原则

### 2.1 开发即测试原则
- 写一个函数 → 立即写测试 → 运行测试确保通过
- 写一个组件 → 立即写组件测试 → 运行测试确保通过
- 完成一个功能点 → 立即进行功能点代码审查

### 2.2 代码审查检查清单
- [ ] 代码规范符合性（大驼峰小驼峰命名）
- [ ] 测试覆盖率 ≥ 90%
- [ ] 错误处理完整性
- [ ] 代码简洁性（避免过度设计）
- [ ] 性能指标达标
- [ ] 安全漏洞检查
- [ ] 文档完整性

### 2.3 模块验收标准
- [ ] 所有功能正常工作
- [ ] 测试覆盖率达标
- [ ] 性能指标达标
- [ ] 代码质量达标
- [ ] 文档完整
- [ ] 生产环境验证通过

## 三、测试策略

### 3.1 分层测试策略
采用分层测试策略，确保Web环境开发效率和Electron环境真实性的平衡：

| 测试层次 | 测试工具 | 运行环境 | 覆盖率要求 | 执行频率 |
|---------|---------|----------|-----------|----------|
| 单元测试 | Vitest | Web环境(jsdom) | ≥ 90% | 每次代码提交 |
| 集成测试 | Playwright + Electron | Electron环境 | ≥ 90% | 每日构建 |
| 端到端测试 | Playwright + Electron | Electron环境 | ≥ 90% | 模块完成时 |
| 性能测试 | Playwright + Electron | Electron环境 | 100% | 模块完成时 |

### 3.2 测试环境策略
**Web环境测试**：
- **用途**：快速开发验证、UI组件测试、逻辑单元测试
- **数据**：模拟数据（MockDataService）
- **优势**：启动快速，即时反馈，适合开发阶段

**Electron环境测试**：
- **用途**：真实环境验证、完整功能测试、业务流程测试
- **数据**：真实SQLite数据库
- **优势**：环境真实，功能完整，确保生产一致性

### 3.3 测试执行原则
- **开发阶段**：主要使用Web环境进行快速单元测试
- **集成阶段**：必须使用Electron环境进行API和数据库测试
- **验收阶段**：完全在Electron环境中进行端到端测试
- **部署前**：在Electron环境中进行完整的回归测试


## 五、简化开发策略

### 5.1 简化原则
- **避免过度设计**：只实现必要的功能，不做过度抽象
- **保持代码简洁**：优先选择简单直接的实现方式
- **重点关注用户体验**：确保功能完整性和易用性
- **确保模块独立**：每个模块都能独立开发和测试

### 5.2 风险管控
- **技术风险**：选择成熟稳定的技术栈
- **进度风险**：合理安排模块依赖关系
- **质量风险**：严格执行测试和审查流程
